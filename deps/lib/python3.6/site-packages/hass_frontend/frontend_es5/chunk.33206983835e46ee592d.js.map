{"version":3,"sources":["webpack:///./node_modules/@polymer/paper-item/paper-item-behavior.js","webpack:///./node_modules/@polymer/paper-item/paper-item.js","webpack:///./node_modules/@polymer/paper-item/paper-item-shared-styles.js","webpack:///./src/components/ha-card.ts","webpack:///./node_modules/@polymer/paper-item/paper-item-body.js","webpack:///./src/panels/config/ha-config-section.js","webpack:///./node_modules/@polymer/paper-styles/element-styles/paper-material-styles.js","webpack:///./src/common/string/compare.ts","webpack:///./node_modules/@polymer/paper-behaviors/paper-button-behavior.js","webpack:///./node_modules/@polymer/paper-fab/paper-fab.js","webpack:///./src/data/user.ts","webpack:///./src/data/person.ts","webpack:///./src/panels/config/person/show-dialog-person-detail.ts","webpack:///./src/panels/config/person/ha-config-person.ts"],"names":["__webpack_require__","d","__webpack_exports__","PaperItemBehavior","_polymer_iron_behaviors_iron_button_state_js__WEBPACK_IMPORTED_MODULE_1__","_polymer_iron_behaviors_iron_control_state_js__WEBPACK_IMPORTED_MODULE_2__","IronButtonState","IronControlState","hostAttributes","role","tabindex","Polymer","_template","html","_templateObject","is","behaviors","$_documentContainer","document","createElement","setAttribute","innerHTML","head","appendChild","content","HaCard","property","css","_templateObject2","this","header","_templateObject3","_templateObject4","LitElement","customElements","define","HaConfigSection","PolymerElement","hass","type","Object","narrow","Boolean","isWide","value","classes","template","compare","caseInsensitiveCompare","a","b","toLowerCase","PaperButtonBehaviorImpl","properties","elevation","Number","reflectToAttribute","readOnly","observers","animated","_calculateElevation","e","disabled","active","pressed","receivedFocusFromKeyboard","_setElevation","_computeKeyboardClass","toggleClass","_spaceKeyDownHandler","event","IronButtonStateImpl","call","hasRipple","getRipple","ripples","length","_ripple","uiDownAction","_spaceKeyUpHandler","uiUpAction","PaperButtonBehavior","PaperRippleBehavior","src","String","icon","mini","label","observer","_labelChanged","_computeIsIconFab","SYSTEM_GROUP_ID_ADMIN","SYSTEM_GROUP_ID_USER","fetchUsers","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","abrupt","callWS","stop","_x","apply","arguments","updateUser","_ref3","_callee3","userId","params","_context3","assign","user_id","_x4","_x5","_x6","deleteUser","_ref4","_callee4","_context4","_x7","_x8","createPerson","values","loadPersonDetailDialog","Promise","all","then","bind","HaConfigPerson","_storageItems","_configItems","_usersLoad","_this2","undefined","map","entry","_openEditEntry","name","_templateObject5","_createPerson","_templateObject6","_templateObject7","_templateObject8","changedProps","_get","_getPrototypeOf","prototype","_fetchData","personData","storage","sort","ent1","ent2","config","_openDialog","ev","currentTarget","users","currentPerson","used","Set","_arr","_i","coll","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","pers","add","err","return","currentUserId","filter","user","id","has","element","systemLogDetailParams","_allowedUsers","createEntry","_createEntry","_callee2","created","_context2","_this3","sent","concat","_x2","updateEntry","_updateEntry","updated","personId","updates","person_id","ent","_x3","removeEntry","_removeEntry","confirm","t0","fireEvent","dialogTag","dialogImport","dialogParams","_templateObject9"],"mappings":";uFAAAA,EAAAC,EAAAC,EAAA,sBAAAC,IAAAH,EAAA,OAAAI,EAAAJ,EAAA,IAAAK,EAAAL,EAAA,IA0BaG,EACT,CAACG,IAAiBC,IANe,CACnCC,eAAgB,CAACC,KAAM,SAAUC,SAAU,ufCsE7CC,YAAQ,CACNC,UAAWC,YAAFC,KAaTC,GAAI,aACJC,UAAW,CAACb,yCC3GdH,EAAA,IAAAA,EAAA,IAAAA,EAAA,IAAAA,EAAA,QAcMiB,EAAsBC,SAASC,cAAc,YACnDF,EAAoBG,aAAa,QAAS,kBAE1CH,EAAoBI,UAApB,40CAwDAH,SAASI,KAAKC,YAAYN,EAAoBO,khHChExCC,o8MACHC,mFAED,WACE,OAAOC,YAAPb,yCA+CF,WACE,OAAOD,YAAPe,IACIC,KAAKC,OACHjB,YADFkB,IAE+BF,KAAKC,QAElCjB,YAJFmB,WArDaC,KA+DrBC,eAAeC,OAAO,UAAWV,gkCC5BjCd,YAAQ,CACNC,UAAWC,YAAFC,KAmCTC,GAAI,m8EC3EAqB,gaAAwBC,8CAE1B,OAAOxB,YAAPC,wCA6DA,MAAO,CACLwB,KAAM,CACJC,KAAMC,QAGRC,OAAQ,CACNF,KAAMG,SAGRC,OAAQ,CACNJ,KAAMG,QACNE,OAAO,uDAKSD,GAGpB,OAAOA,EAFO,WAEYE,wDAGbF,GAGb,MAFc,oBAEIA,EAAS,aAAe,wDAI9CT,eAAeC,OAAO,oBAAqBC,8sFC9D3C,IAAMU,EAAWjC,YAAHC,KAuFdgC,EAAS1B,aAAa,QAAS,kBAC/BF,SAASI,KAAKC,YAAYuB,EAAStB,2CC3HnCxB,EAAAC,EAAAC,EAAA,sBAAA6C,IAAA/C,EAAAC,EAAAC,EAAA,sBAAA8C,IAAO,IAAMD,EAAU,SAACE,EAAWC,GACjC,OAAID,EAAIC,GACE,EAEND,EAAIC,EACC,EAGF,GAGIF,EAAyB,SAACC,EAAWC,GAAZ,OACpCH,EAAQE,EAAEE,cAAeD,EAAEC,mHCMhBC,EAA0B,CACrCC,WAAY,CAUVC,UAAW,CAACf,KAAMgB,OAAQC,oBAAoB,EAAMC,UAAU,IAGhEC,UAAW,CACT,qFACA,oDAGFlD,eAAgB,CAACC,KAAM,SAAUC,SAAU,IAAKiD,UAAU,GAE1DC,oBAAqB,WACnB,IAAIC,EAAI,EACJhC,KAAKiC,SACPD,EAAI,EACKhC,KAAKkC,QAAUlC,KAAKmC,QAC7BH,EAAI,EACKhC,KAAKoC,4BACdJ,EAAI,GAENhC,KAAKqC,cAAcL,IAGrBM,sBAAuB,SAASF,GAC9BpC,KAAKuC,YAAY,iBAAkBH,IASrCI,qBAAsB,SAASC,GAC7BC,IAAoBF,qBAAqBG,KAAK3C,KAAMyC,GAEhDzC,KAAK4C,aAAe5C,KAAK6C,YAAYC,QAAQC,OAAS,GACxD/C,KAAKgD,QAAQC,gBAUjBC,mBAAoB,SAAST,GAC3BC,IAAoBQ,mBAAmBP,KAAK3C,KAAMyC,GAC9CzC,KAAK4C,aACP5C,KAAKgD,QAAQG,eAMNC,EAAsB,CACjC3E,IACAC,IACA2E,IACA9B,4hJCnEF,IAAMN,EAAWjC,YAAHC,KA2FdgC,EAAS1B,aAAa,mBAAoB,IA6C1CT,YAAQ,CACNC,UAAWkC,EAEX/B,GAAI,YAEJC,UAAW,CAACiE,GAEZ5B,WAAY,CAKV8B,IAAK,CAAC5C,KAAM6C,OAAQxC,MAAO,IAO3ByC,KAAM,CAAC9C,KAAM6C,OAAQxC,MAAO,IAK5B0C,KAAM,CAAC/C,KAAMG,QAASE,OAAO,EAAOY,oBAAoB,GAMxD+B,MAAO,CAAChD,KAAM6C,OAAQI,SAAU,kBAGlCC,cAAe,WACb5D,KAAKT,aAAa,aAAcS,KAAK0D,QAGvCG,kBAAmB,SAASL,EAAMF,GAChC,OAAQE,EAAKT,OAAS,GAAOO,EAAIP,OAAS,igBChMvC,IAAMe,EAAwB,eACxBC,EAAuB,eAkBvBC,EAAU,eAAAC,EAAAC,EAAAC,mBAAAC,KAAG,SAAAC,EAAO5D,GAAP,OAAA0D,mBAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAG,OAAA,SACxBjE,EAAKkE,OAAe,CAClBjE,KAAM,sBAFgB,wBAAA6D,EAAAK,SAAAP,MAAH,gBAAAQ,GAAA,OAAAZ,EAAAa,MAAA9E,KAAA+E,YAAA,GAWVC,EAAU,eAAAC,EAAAf,EAAAC,mBAAAC,KAAG,SAAAc,EACxBzE,EACA0E,EACAC,GAHwB,OAAAjB,mBAAAG,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cAAAY,EAAAX,OAAA,SAKxBjE,EAAKkE,OAALhE,OAAA2E,OAAA,GACKF,EADL,CAEE1E,KAAM,qBACN6E,QAASJ,MARa,wBAAAE,EAAAT,SAAAM,MAAH,gBAAAM,EAAAC,EAAAC,GAAA,OAAAT,EAAAH,MAAA9E,KAAA+E,YAAA,GAWVY,EAAU,eAAAC,EAAA1B,EAAAC,mBAAAC,KAAG,SAAAyB,EAAOpF,EAAqB0E,GAA5B,OAAAhB,mBAAAG,KAAA,SAAAwB,GAAA,cAAAA,EAAAtB,KAAAsB,EAAArB,MAAA,cAAAqB,EAAApB,OAAA,SACxBjE,EAAKkE,OAAa,CAChBjE,KAAM,qBACN6E,QAASJ,KAHa,wBAAAW,EAAAlB,SAAAiB,MAAH,gBAAAE,EAAAC,GAAA,OAAAJ,EAAAd,MAAA9E,KAAA+E,YAAA,uDCvBVkB,wBAAe,SAC1BxF,EACAyF,GAF0B,OAI1BzF,EAAKkE,OAALhE,OAAA2E,OAAA,CACE5E,KAAM,iBACHwF,uDCfMC,EAAyB,kBACpCC,QAAAC,IAAA,CAAAlI,EAAA6D,EAAA,GAAA7D,EAAA6D,EAAA,GAAA7D,EAAA6D,EAAA,GAAA7D,EAAA6D,EAAA,GAAA7D,EAAA6D,EAAA,OAAAsE,KAAAnI,EAAAoI,KAAA,6uICkBIC,2QACG/F,cACAK,gBACC2F,uBACAC,sBACAC,0QALmBvG,8CAgBe,IAAAwG,EAAA5G,KACxC,OACGA,KAAKS,WACiBoG,IAAvB7G,KAAKyG,oBACiBI,IAAtB7G,KAAK0G,aAMA1H,YAAPe,IAEiCC,KAAKc,OAI5Bd,KAAK0G,aAAa3D,OAAS,EACzB/D,YADFkB,KAOE,GAGFF,KAAKyG,cAAcK,IAAI,SAACC,GACxB,OAAO/H,YAAPmB,IACuByG,EAAKI,eAAyBD,EAE7CA,EAAME,QAKgB,IAA9BjH,KAAKyG,cAAc1D,OACjB/D,YADFkI,IAI2BlH,KAAKmH,eAK9BnI,YATFoI,KAWFpH,KAAK0G,aAAa3D,OAAS,EACzB/D,YADFqI,IAGQrH,KAAK0G,aAAaI,IAAI,SAACC,GACvB,OAAO/H,YAAPsI,IAGQP,EAAME,SAOpB,GAKKjH,KAAKc,OAGPd,KAAKmH,eA9DTnI,YAAPC,0CAmEmBsI,GACrBC,EAAAC,EAAAjB,EAAAkB,WAAA,eAAA1H,MAAA2C,KAAA3C,KAAmBuH,GACnBvH,KAAK2H,aACLxB,kLAIAnG,KAAK2G,WAAa3C,YAAWhE,KAAKS,eACIT,KAAKS,KFhHxCkE,OAGF,CAAEjE,KAAM,uBE6GHkH,SAEN5H,KAAKyG,cAAgBmB,EAAWC,QAAQC,KAAK,SAACC,EAAMC,GAAP,OAC3C9G,YAAQ6G,EAAKd,KAAMe,EAAKf,QAE1BjH,KAAK0G,aAAekB,EAAWK,OAAOH,KAAK,SAACC,EAAMC,GAAP,OACzC9G,YAAQ6G,EAAKd,KAAMe,EAAKf,kJAK1BjH,KAAKkI,qDAGgBC,GACrB,IAAMpB,EAAiBoB,EAAGC,cAAuBrB,MACjD/G,KAAKkI,YAAYnB,yCAGGsB,EAAeC,GAEnC,IADA,IAAMC,EAAO,IAAIC,IAD0CC,EAExC,CAACzI,KAAK0G,aAAc1G,KAAKyG,eAA5CiC,EAAA,EAAAA,EAAAD,EAAA1F,OAAA2F,IAA4D,CAAvD,IAAMC,EAAIF,EAAAC,GAA6CE,GAAA,EAAAC,GAAA,EAAAC,OAAAjC,EAAA,IAC1D,QAAAkC,EAAAC,EAAmBL,EAAnBM,OAAAC,cAAAN,GAAAG,EAAAC,EAAAvE,QAAA0E,MAAAP,GAAA,EAA0B,KAAfQ,EAAeL,EAAAhI,MACpBqI,EAAK7D,SACPgD,EAAKc,IAAID,EAAK7D,UAHwC,MAAA+D,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,YAAAV,GAAA,MAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,MAAAC,IAO5D,IAAMU,EAAgBlB,EAAgBA,EAAc/C,aAAUsB,EAC9D,OAAOwB,EAAMoB,OACX,SAACC,GAAD,OAAUA,EAAKC,KAAOH,IAAkBjB,EAAKqB,IAAIF,EAAKC,uFAIhC5C,+GACJ/G,KAAK2G,kBAAnB0B,SDnJRwB,ECqJyB7J,KDpJzB8J,ECoJ+B,CAC3B/C,QACAsB,MAAOrI,KAAK+J,cAAc1B,EAAOtB,GACjCiD,YAAW,eAAAC,EAAA/F,EAAAC,mBAAAC,KAAE,SAAA8F,EAAOhE,GAAP,IAAAiE,EAAA,OAAAhG,mBAAAG,KAAA,SAAA8F,GAAA,cAAAA,EAAA5F,KAAA4F,EAAA3F,MAAA,cAAA2F,EAAA3F,KAAA,EACWwB,EAAaoE,EAAK5J,KAAOyF,GADpC,OACLiE,EADKC,EAAAE,KAEXD,EAAK5D,cAAgB4D,EAAK5D,cAAe8D,OAAOJ,GAASrC,KACvD,SAACC,EAAMC,GAAP,OAAgB9G,YAAQ6G,EAAKd,KAAMe,EAAKf,QAH/B,wBAAAmD,EAAAxF,SAAAsF,MAAF,gBAAAM,GAAA,OAAAP,EAAAnF,MAAA9E,KAAA+E,YAAA,GAMX0F,YAAW,eAAAC,EAAAxG,EAAAC,mBAAAC,KAAE,SAAAc,EAAOgB,GAAP,IAAAyE,EAAA,OAAAxG,mBAAAG,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cAAAY,EAAAZ,KAAA,EF/IjBhE,EEgJyC4J,EAAK5J,KF/I9CmK,EE+IqD7D,EAAO4C,GF9I5DkB,EE8IgE3E,EF5IhEzF,EAAKkE,OAALhE,OAAA2E,OAAA,CACE5E,KAAM,gBACNoK,UAAWF,GACRC,IEwIY,OACLF,EADKtF,EAAAiF,KAEXD,EAAK5D,cAAgB4D,EAAK5D,cAAeK,IAAI,SAACiE,GAAD,OAC3CA,IAAQhE,EAAQ4D,EAAUI,IAHjB,wBAAA1F,EAAAT,OFhJS,IAC1BnE,EACAmK,EACAC,GE6IiB3F,MAAF,gBAAA8F,GAAA,OAAAN,EAAA5F,MAAA9E,KAAA+E,YAAA,GAMXkG,YAAW,eAAAC,EAAAhH,EAAAC,mBAAAC,KAAE,SAAAyB,IAAA,OAAA1B,mBAAAG,KAAA,SAAAwB,GAAA,cAAAA,EAAAtB,KAAAsB,EAAArB,MAAA,UAER0G,QAAO,gHAFC,CAAArF,EAAArB,KAAA,eAAAqB,EAAApB,OAAA,UAMF,GANE,cAAAoB,EAAAtB,KAAA,EAAAsB,EAAArB,KAAA,EF3IUhE,EEqJA4J,EAAK5J,KFrJgBmK,EEqJT7D,EAAO4C,GFpJ9ClJ,EAAKkE,OAAO,CACVjE,KAAM,gBACNoK,UAAWF,IEwII,cAWTP,EAAK5D,cAAgB4D,EAAK5D,cAAegD,OACvC,SAACsB,GAAD,OAASA,IAAQhE,IAZVjB,EAAApB,OAAA,UAcF,GAdE,cAAAoB,EAAAtB,KAAA,EAAAsB,EAAAsF,GAAAtF,EAAA,SAAAA,EAAApB,OAAA,UAgBF,GAhBE,yBAAAoB,EAAAlB,OF3IS,IAACnE,EAAqBmK,GE2I/B/E,EAAA,iBAAF,yBAAAqF,EAAApG,MAAA9E,KAAA+E,YAAA,IDjKfsG,YAAUxB,EAAS,cAAe,CAChCyB,UAAW,uBACXC,aAAcpF,EACdqF,aAAc1B,qCAPoB,IACpCD,EACAC,0GCsBE,MAAO,CACLrJ,KAAM,GACNK,OAAQ,GACR2F,cAAe,GACfC,aAAc,mCAgKhB,OAAO5G,YAAP2L,2CAmCJpL,eAAeC,OAAO,mBAAoBkG","file":"chunk.33206983835e46ee592d.js","sourcesContent":["/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronButtonState} from '@polymer/iron-behaviors/iron-button-state.js';\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\n\n/*\n`PaperItemBehavior` is a convenience behavior shared by <paper-item> and\n<paper-icon-item> that manages the shared control states and attributes of\nthe items.\n*/\n/** @polymerBehavior PaperItemBehavior */\nexport const PaperItemBehaviorImpl = {\n  hostAttributes: {role: 'option', tabindex: '0'}\n};\n\n/** @polymerBehavior */\nexport const PaperItemBehavior =\n    [IronButtonState, IronControlState, PaperItemBehaviorImpl];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport './paper-item-shared-styles.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperItemBehavior} from './paper-item-behavior.js';\n\n/**\nMaterial design:\n[Lists](https://www.google.com/design/spec/components/lists.html)\n\n`<paper-item>` is an interactive list item. By default, it is a horizontal\nflexbox.\n\n    <paper-item>Item</paper-item>\n\nUse this element with `<paper-item-body>` to make Material Design styled\ntwo-line and three-line items.\n\n    <paper-item>\n      <paper-item-body two-line>\n        <div>Show your status</div>\n        <div secondary>Your status is visible to everyone</div>\n      </paper-item-body>\n      <iron-icon icon=\"warning\"></iron-icon>\n    </paper-item>\n\nTo use `paper-item` as a link, wrap it in an anchor tag. Since `paper-item` will\nalready receive focus, you may want to prevent the anchor tag from receiving\nfocus as well by setting its tabindex to -1.\n\n    <a href=\"https://www.polymer-project.org/\" tabindex=\"-1\">\n      <paper-item raised>Polymer Project</paper-item>\n    </a>\n\nIf you are concerned about performance and want to use `paper-item` in a\n`paper-listbox` with many items, you can just use a native `button` with the\n`paper-item` class applied (provided you have correctly included the shared\nstyles):\n\n    <style is=\"custom-style\" include=\"paper-item-shared-styles\"></style>\n\n    <paper-listbox>\n      <button class=\"paper-item\" role=\"option\">Inbox</button>\n      <button class=\"paper-item\" role=\"option\">Starred</button>\n      <button class=\"paper-item\" role=\"option\">Sent mail</button>\n    </paper-listbox>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-min-height` | Minimum height of the item | `48px`\n`--paper-item` | Mixin applied to the item | `{}`\n`--paper-item-selected-weight` | The font weight of a selected item | `bold`\n`--paper-item-selected` | Mixin applied to selected paper-items | `{}`\n`--paper-item-disabled-color` | The color for disabled paper-items | `--disabled-text-color`\n`--paper-item-disabled` | Mixin applied to disabled paper-items | `{}`\n`--paper-item-focused` | Mixin applied to focused paper-items | `{}`\n`--paper-item-focused-before` | Mixin applied to :before focused paper-items | `{}`\n\n### Accessibility\n\nThis element has `role=\"listitem\"` by default. Depending on usage, it may be\nmore appropriate to set `role=\"menuitem\"`, `role=\"menuitemcheckbox\"` or\n`role=\"menuitemradio\"`.\n\n    <paper-item role=\"menuitemcheckbox\">\n      <paper-item-body>\n        Show your status\n      </paper-item-body>\n      <paper-checkbox></paper-checkbox>\n    </paper-item>\n\n@group Paper Elements\n@element paper-item\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-item-shared-styles\">\n      :host {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        @apply --paper-font-subhead;\n\n        @apply --paper-item;\n      }\n    </style>\n    <slot></slot>\n`,\n\n  is: 'paper-item',\n  behaviors: [PaperItemBehavior]\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/color.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML = `<dom-module id=\"paper-item-shared-styles\">\n  <template>\n    <style>\n      :host, .paper-item {\n        display: block;\n        position: relative;\n        min-height: var(--paper-item-min-height, 48px);\n        padding: 0px 16px;\n      }\n\n      .paper-item {\n        @apply --paper-font-subhead;\n        border:none;\n        outline: none;\n        background: white;\n        width: 100%;\n        text-align: left;\n      }\n\n      :host([hidden]), .paper-item[hidden] {\n        display: none !important;\n      }\n\n      :host(.iron-selected), .paper-item.iron-selected {\n        font-weight: var(--paper-item-selected-weight, bold);\n\n        @apply --paper-item-selected;\n      }\n\n      :host([disabled]), .paper-item[disabled] {\n        color: var(--paper-item-disabled-color, var(--disabled-text-color));\n\n        @apply --paper-item-disabled;\n      }\n\n      :host(:focus), .paper-item:focus {\n        position: relative;\n        outline: 0;\n\n        @apply --paper-item-focused;\n      }\n\n      :host(:focus):before, .paper-item:focus:before {\n        @apply --layout-fit;\n\n        background: currentColor;\n        content: '';\n        opacity: var(--dark-divider-opacity);\n        pointer-events: none;\n\n        @apply --paper-item-focused-before;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import {\n  css,\n  CSSResult,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\n\nclass HaCard extends LitElement {\n  @property() public header?: string;\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        background: var(\n          --ha-card-background,\n          var(--paper-card-background-color, white)\n        );\n        border-radius: var(--ha-card-border-radius, 2px);\n        box-shadow: var(\n          --ha-card-box-shadow,\n          0 2px 2px 0 rgba(0, 0, 0, 0.14),\n          0 1px 5px 0 rgba(0, 0, 0, 0.12),\n          0 3px 1px -2px rgba(0, 0, 0, 0.2)\n        );\n        color: var(--primary-text-color);\n        display: block;\n        transition: all 0.3s ease-out;\n        position: relative;\n      }\n\n      .card-header,\n      :host ::slotted(.card-header) {\n        color: var(--ha-card-header-color, --primary-text-color);\n        font-family: var(--ha-card-header-font-family, inherit);\n        font-size: var(--ha-card-header-font-size, 24px);\n        letter-spacing: -0.012em;\n        line-height: 32px;\n        padding: 24px 16px 16px;\n        display: block;\n      }\n\n      :host ::slotted(.card-content:not(:first-child)),\n      slot:not(:first-child)::slotted(.card-content) {\n        padding-top: 0px;\n        margin-top: -8px;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      ${this.header\n        ? html`\n            <div class=\"card-header\">${this.header}</div>\n          `\n        : html``}\n      <slot></slot>\n    `;\n  }\n}\n\ncustomElements.define(\"ha-card\", HaCard);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/*\nUse `<paper-item-body>` in a `<paper-item>` or `<paper-icon-item>` to make two-\nor three- line items. It is a flex item that is a vertical flexbox.\n\n    <paper-item>\n      <paper-item-body two-line>\n        <div>Show your status</div>\n        <div secondary>Your status is visible to everyone</div>\n      </paper-item-body>\n    </paper-item>\n\nThe child elements with the `secondary` attribute is given secondary text\nstyling.\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-body-two-line-min-height` | Minimum height of a two-line item | `72px`\n`--paper-item-body-three-line-min-height` | Minimum height of a three-line item | `88px`\n`--paper-item-body-secondary-color` | Foreground color for the `secondary` area | `--secondary-text-color`\n`--paper-item-body-secondary` | Mixin applied to the `secondary` area | `{}`\n\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        overflow: hidden; /* needed for text-overflow: ellipsis to work on ff */\n        @apply --layout-vertical;\n        @apply --layout-center-justified;\n        @apply --layout-flex;\n      }\n\n      :host([two-line]) {\n        min-height: var(--paper-item-body-two-line-min-height, 72px);\n      }\n\n      :host([three-line]) {\n        min-height: var(--paper-item-body-three-line-min-height, 88px);\n      }\n\n      :host > ::slotted(*) {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      :host > ::slotted([secondary]) {\n        @apply --paper-font-body1;\n\n        color: var(--paper-item-body-secondary-color, var(--secondary-text-color));\n\n        @apply --paper-item-body-secondary;\n      }\n    </style>\n\n    <slot></slot>\n`,\n\n  is: 'paper-item-body'\n});\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../resources/ha-style\";\n\nclass HaConfigSection extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex ha-style\">\n        .content {\n          padding: 28px 20px 0;\n          max-width: 1040px;\n          margin: 0 auto;\n        }\n\n        .header {\n          @apply --paper-font-display1;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        .together {\n          margin-top: 32px;\n        }\n\n        .intro {\n          @apply --paper-font-subhead;\n          width: 100%;\n          max-width: 400px;\n          margin-right: 40px;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        .panel {\n          margin-top: -24px;\n        }\n\n        .panel ::slotted(*) {\n          margin-top: 24px;\n          display: block;\n        }\n\n        .narrow.content {\n          max-width: 640px;\n        }\n        .narrow .together {\n          margin-top: 20px;\n        }\n        .narrow .header {\n          @apply --paper-font-headline;\n        }\n        .narrow .intro {\n          font-size: 14px;\n          padding-bottom: 20px;\n          margin-right: 0;\n          max-width: 500px;\n        }\n      </style>\n      <div class$=\"[[computeContentClasses(isWide)]]\">\n        <div class=\"header\"><slot name=\"header\"></slot></div>\n        <div class$=\"[[computeClasses(isWide)]]\">\n          <div class=\"intro\"><slot name=\"introduction\"></slot></div>\n          <div class=\"panel flex-auto\"><slot></slot></div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      isWide: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  computeContentClasses(isWide) {\n    var classes = \"content \";\n\n    return isWide ? classes : classes + \"narrow\";\n  }\n\n  computeClasses(isWide) {\n    var classes = \"together layout \";\n\n    return classes + (isWide ? \"horizontal\" : \"vertical narrow\");\n  }\n}\n\ncustomElements.define(\"ha-config-section\", HaConfigSection);\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/**\nMaterial design:\n[Cards](https://www.google.com/design/spec/components/cards.html)\n\nShared styles that you can apply to an element to renders two shadows on top\nof each other,that create the effect of a lifted piece of paper.\n\nExample:\n\n    <custom-style>\n      <style is=\"custom-style\" include=\"paper-material-styles\"></style>\n    </custom-style>\n\n    <div class=\"paper-material\" elevation=\"1\">\n      ... content ...\n    </div>\n\n@group Paper Elements\n@demo demo/index.html\n*/\n\nimport '@polymer/polymer/polymer-legacy.js';\nimport '../shadow.js';\n\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nconst template = html`\n<dom-module id=\"paper-material-styles\">\n  <template>\n    <style>\n      html {\n        --paper-material: {\n          display: block;\n          position: relative;\n        };\n        --paper-material-elevation-1: {\n          @apply --shadow-elevation-2dp;\n        };\n        --paper-material-elevation-2: {\n          @apply --shadow-elevation-4dp;\n        };\n        --paper-material-elevation-3: {\n          @apply --shadow-elevation-6dp;\n        };\n        --paper-material-elevation-4: {\n          @apply --shadow-elevation-8dp;\n        };\n        --paper-material-elevation-5: {\n          @apply --shadow-elevation-16dp;\n        };\n      }\n      .paper-material {\n        @apply --paper-material;\n      }\n      .paper-material[elevation=\"1\"] {\n        @apply --paper-material-elevation-1;\n      }\n      .paper-material[elevation=\"2\"] {\n        @apply --paper-material-elevation-2;\n      }\n      .paper-material[elevation=\"3\"] {\n        @apply --paper-material-elevation-3;\n      }\n      .paper-material[elevation=\"4\"] {\n        @apply --paper-material-elevation-4;\n      }\n      .paper-material[elevation=\"5\"] {\n        @apply --paper-material-elevation-5;\n      }\n\n      /* Duplicate the styles because of https://github.com/webcomponents/shadycss/issues/193 */\n      :host {\n        --paper-material: {\n          display: block;\n          position: relative;\n        };\n        --paper-material-elevation-1: {\n          @apply --shadow-elevation-2dp;\n        };\n        --paper-material-elevation-2: {\n          @apply --shadow-elevation-4dp;\n        };\n        --paper-material-elevation-3: {\n          @apply --shadow-elevation-6dp;\n        };\n        --paper-material-elevation-4: {\n          @apply --shadow-elevation-8dp;\n        };\n        --paper-material-elevation-5: {\n          @apply --shadow-elevation-16dp;\n        };\n      }\n      :host(.paper-material) {\n        @apply --paper-material;\n      }\n      :host(.paper-material[elevation=\"1\"]) {\n        @apply --paper-material-elevation-1;\n      }\n      :host(.paper-material[elevation=\"2\"]) {\n        @apply --paper-material-elevation-2;\n      }\n      :host(.paper-material[elevation=\"3\"]) {\n        @apply --paper-material-elevation-3;\n      }\n      :host(.paper-material[elevation=\"4\"]) {\n        @apply --paper-material-elevation-4;\n      }\n      :host(.paper-material[elevation=\"5\"]) {\n        @apply --paper-material-elevation-5;\n      }\n    </style>\n  </template>\n</dom-module>`;\ntemplate.setAttribute('style', 'display: none;');\ndocument.head.appendChild(template.content);\n","export const compare = (a: string, b: string) => {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n\n  return 0;\n};\n\nexport const caseInsensitiveCompare = (a: string, b: string) =>\n  compare(a.toLowerCase(), b.toLowerCase());\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronButtonState, IronButtonStateImpl} from '@polymer/iron-behaviors/iron-button-state.js';\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\n\nimport {PaperRippleBehavior} from './paper-ripple-behavior.js';\n\n/** @polymerBehavior PaperButtonBehavior */\nexport const PaperButtonBehaviorImpl = {\n  properties: {\n    /**\n     * The z-depth of this element, from 0-5. Setting to 0 will remove the\n     * shadow, and each increasing number greater than 0 will be \"deeper\"\n     * than the last.\n     *\n     * @attribute elevation\n     * @type number\n     * @default 1\n     */\n    elevation: {type: Number, reflectToAttribute: true, readOnly: true}\n  },\n\n  observers: [\n    '_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)',\n    '_computeKeyboardClass(receivedFocusFromKeyboard)'\n  ],\n\n  hostAttributes: {role: 'button', tabindex: '0', animated: true},\n\n  _calculateElevation: function() {\n    var e = 1;\n    if (this.disabled) {\n      e = 0;\n    } else if (this.active || this.pressed) {\n      e = 4;\n    } else if (this.receivedFocusFromKeyboard) {\n      e = 3;\n    }\n    this._setElevation(e);\n  },\n\n  _computeKeyboardClass: function(receivedFocusFromKeyboard) {\n    this.toggleClass('keyboard-focus', receivedFocusFromKeyboard);\n  },\n\n  /**\n   * In addition to `IronButtonState` behavior, when space key goes down,\n   * create a ripple down effect.\n   *\n   * @param {!KeyboardEvent} event .\n   */\n  _spaceKeyDownHandler: function(event) {\n    IronButtonStateImpl._spaceKeyDownHandler.call(this, event);\n    // Ensure that there is at most one ripple when the space key is held down.\n    if (this.hasRipple() && this.getRipple().ripples.length < 1) {\n      this._ripple.uiDownAction();\n    }\n  },\n\n  /**\n   * In addition to `IronButtonState` behavior, when space key goes up,\n   * create a ripple up effect.\n   *\n   * @param {!KeyboardEvent} event .\n   */\n  _spaceKeyUpHandler: function(event) {\n    IronButtonStateImpl._spaceKeyUpHandler.call(this, event);\n    if (this.hasRipple()) {\n      this._ripple.uiUpAction();\n    }\n  }\n};\n\n/** @polymerBehavior */\nexport const PaperButtonBehavior = [\n  IronButtonState,\n  IronControlState,\n  PaperRippleBehavior,\n  PaperButtonBehaviorImpl\n];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/paper-styles/element-styles/paper-material-styles.js';\nimport '@polymer/paper-styles/color.js';\nimport '@polymer/paper-styles/default-theme.js';\n\nimport {PaperButtonBehavior} from '@polymer/paper-behaviors/paper-button-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst template = html`\n  <style include=\"paper-material-styles\">\n    :host {\n      @apply --layout-vertical;\n      @apply --layout-center-center;\n\n      background: var(--paper-fab-background, var(--accent-color));\n      border-radius: 50%;\n      box-sizing: border-box;\n      color: var(--text-primary-color);\n      cursor: pointer;\n      height: 56px;\n      min-width: 0;\n      outline: none;\n      padding: 16px;\n      position: relative;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n      width: 56px;\n      z-index: 0;\n\n      /* NOTE: Both values are needed, since some phones require the value \\`transparent\\`. */\n      -webkit-tap-highlight-color: rgba(0,0,0,0);\n      -webkit-tap-highlight-color: transparent;\n\n      @apply --paper-fab;\n    }\n\n    [hidden] {\n      display: none !important;\n    }\n\n    :host([mini]) {\n      width: 40px;\n      height: 40px;\n      padding: 8px;\n\n      @apply --paper-fab-mini;\n    }\n\n    :host([disabled]) {\n      color: var(--paper-fab-disabled-text, var(--paper-grey-500));\n      background: var(--paper-fab-disabled-background, var(--paper-grey-300));\n\n      @apply --paper-fab-disabled;\n    }\n\n    iron-icon {\n      @apply --paper-fab-iron-icon;\n    }\n\n    span {\n      width: 100%;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      text-align: center;\n\n      @apply --paper-fab-label;\n    }\n\n    :host(.keyboard-focus) {\n      background: var(--paper-fab-keyboard-focus-background, var(--paper-pink-900));\n    }\n\n    :host([elevation=\"1\"]) {\n      @apply --paper-material-elevation-1;\n    }\n\n    :host([elevation=\"2\"]) {\n      @apply --paper-material-elevation-2;\n    }\n\n    :host([elevation=\"3\"]) {\n      @apply --paper-material-elevation-3;\n    }\n\n    :host([elevation=\"4\"]) {\n      @apply --paper-material-elevation-4;\n    }\n\n    :host([elevation=\"5\"]) {\n      @apply --paper-material-elevation-5;\n    }\n  </style>\n\n  <iron-icon id=\"icon\" hidden\\$=\"{{!_computeIsIconFab(icon, src)}}\" src=\"[[src]]\" icon=\"[[icon]]\"></iron-icon>\n  <span hidden\\$=\"{{_computeIsIconFab(icon, src)}}\">{{label}}</span>\n`;\ntemplate.setAttribute('strip-whitespace', '');\n\n/**\nMaterial design: [Floating Action\nButton](https://www.google.com/design/spec/components/buttons-floating-action-button.html)\n\n`paper-fab` is a floating action button. It contains an image placed in the\ncenter and comes in two sizes: regular size and a smaller size by applying the\nattribute `mini`. When the user touches the button, a ripple effect emanates\nfrom the center of the button.\n\nYou may import `iron-icons` to use with this element, or provide a URL to a\ncustom icon. See `iron-iconset` for more information about how to use a custom\nicon set.\n\nExample:\n\n    <script type=\"module\">\n      import '@polymer/iron-icons/iron-icons.js';\n    </script>\n\n    <paper-fab icon=\"add\"></paper-fab>\n    <paper-fab mini icon=\"favorite\"></paper-fab>\n    <paper-fab src=\"star.png\"></paper-fab>\n\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-fab-background` | The background color of the button | `--accent-color`\n`--paper-fab-keyboard-focus-background` | The background color of the button when focused | `--paper-pink-900`\n`--paper-fab-disabled-background` | The background color of the button when it's disabled | `--paper-grey-300`\n`--paper-fab-disabled-text` | The text color of the button when it's disabled | `--paper-grey-500`\n`--paper-fab` | Mixin applied to the button | `{}`\n`--paper-fab-mini` | Mixin applied to a mini button | `{}`\n`--paper-fab-disabled` | Mixin applied to a disabled button | `{}`\n`--paper-fab-iron-icon` | Mixin applied to the iron-icon within the button | `{}`\n`--paper-fab-label` | Mixin applied to the label within the button | `{}`\n\n@group Paper Elements\n@demo demo/index.html\n*/\nPolymer({\n  _template: template,\n\n  is: 'paper-fab',\n\n  behaviors: [PaperButtonBehavior],\n\n  properties: {\n    /**\n     * The URL of an image for the icon. If the src property is specified,\n     * the icon property should not be.\n     */\n    src: {type: String, value: ''},\n\n    /**\n     * Specifies the icon name or index in the set of icons available in\n     * the icon's icon set. If the icon property is specified,\n     * the src property should not be.\n     */\n    icon: {type: String, value: ''},\n\n    /**\n     * Set this to true to style this is a \"mini\" FAB.\n     */\n    mini: {type: Boolean, value: false, reflectToAttribute: true},\n\n    /**\n     * The label displayed in the badge. The label is centered, and ideally\n     * should have very few characters.\n     */\n    label: {type: String, observer: '_labelChanged'}\n  },\n\n  _labelChanged: function() {\n    this.setAttribute('aria-label', this.label);\n  },\n\n  _computeIsIconFab: function(icon, src) {\n    return (icon.length > 0) || (src.length > 0);\n  }\n});\n","import { HomeAssistant } from \"../types\";\nimport { Credential } from \"./auth\";\n\nexport const SYSTEM_GROUP_ID_ADMIN = \"system-admin\";\nexport const SYSTEM_GROUP_ID_USER = \"system-users\";\nexport const SYSTEM_GROUP_ID_READ_ONLY = \"system-read-only\";\n\nexport interface User {\n  id: string;\n  name: string;\n  is_owner: boolean;\n  is_active: boolean;\n  system_generated: boolean;\n  group_ids: string[];\n  credentials: Credential[];\n}\n\ninterface UpdateUserParams {\n  name?: User[\"name\"];\n  group_ids?: User[\"group_ids\"];\n}\n\nexport const fetchUsers = async (hass: HomeAssistant) =>\n  hass.callWS<User[]>({\n    type: \"config/auth/list\",\n  });\n\nexport const createUser = async (hass: HomeAssistant, name: string) =>\n  hass.callWS<{ user: User }>({\n    type: \"config/auth/create\",\n    name,\n  });\n\nexport const updateUser = async (\n  hass: HomeAssistant,\n  userId: string,\n  params: UpdateUserParams\n) =>\n  hass.callWS<{ user: User }>({\n    ...params,\n    type: \"config/auth/update\",\n    user_id: userId,\n  });\n\nexport const deleteUser = async (hass: HomeAssistant, userId: string) =>\n  hass.callWS<void>({\n    type: \"config/auth/delete\",\n    user_id: userId,\n  });\n","import { HomeAssistant } from \"../types\";\n\nexport interface Person {\n  id: string;\n  name: string;\n  user_id?: string;\n  device_trackers?: string[];\n}\n\nexport interface PersonMutableParams {\n  name: string;\n  user_id: string | null;\n  device_trackers: string[];\n}\n\nexport const fetchPersons = (hass: HomeAssistant) =>\n  hass.callWS<{\n    storage: Person[];\n    config: Person[];\n  }>({ type: \"person/list\" });\n\nexport const createPerson = (\n  hass: HomeAssistant,\n  values: PersonMutableParams\n) =>\n  hass.callWS<Person>({\n    type: \"person/create\",\n    ...values,\n  });\n\nexport const updatePerson = (\n  hass: HomeAssistant,\n  personId: string,\n  updates: Partial<PersonMutableParams>\n) =>\n  hass.callWS<Person>({\n    type: \"person/update\",\n    person_id: personId,\n    ...updates,\n  });\n\nexport const deletePerson = (hass: HomeAssistant, personId: string) =>\n  hass.callWS({\n    type: \"person/delete\",\n    person_id: personId,\n  });\n","import { fireEvent } from \"../../../common/dom/fire_event\";\nimport { Person, PersonMutableParams } from \"../../../data/person\";\nimport { User } from \"../../../data/user\";\n\nexport interface PersonDetailDialogParams {\n  entry?: Person;\n  users: User[];\n  createEntry: (values: PersonMutableParams) => Promise<unknown>;\n  updateEntry: (updates: Partial<PersonMutableParams>) => Promise<unknown>;\n  removeEntry: () => Promise<boolean>;\n}\n\nexport const loadPersonDetailDialog = () =>\n  import(/* webpackChunkName: \"person-detail-dialog\" */ \"./dialog-person-detail\");\n\nexport const showPersonDetailDialog = (\n  element: HTMLElement,\n  systemLogDetailParams: PersonDetailDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-person-detail\",\n    dialogImport: loadPersonDetailDialog,\n    dialogParams: systemLogDetailParams,\n  });\n};\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  css,\n  CSSResult,\n  PropertyDeclarations,\n} from \"lit-element\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@polymer/paper-fab/paper-fab\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport {\n  Person,\n  fetchPersons,\n  updatePerson,\n  deletePerson,\n  createPerson,\n} from \"../../../data/person\";\nimport \"../../../components/ha-card\";\nimport \"../../../layouts/hass-subpage\";\nimport \"../../../layouts/hass-loading-screen\";\nimport { compare } from \"../../../common/string/compare\";\nimport \"../ha-config-section\";\nimport {\n  showPersonDetailDialog,\n  loadPersonDetailDialog,\n} from \"./show-dialog-person-detail\";\nimport { User, fetchUsers } from \"../../../data/user\";\n\nclass HaConfigPerson extends LitElement {\n  public hass?: HomeAssistant;\n  public isWide?: boolean;\n  private _storageItems?: Person[];\n  private _configItems?: Person[];\n  private _usersLoad?: Promise<User[]>;\n\n  static get properties(): PropertyDeclarations {\n    return {\n      hass: {},\n      isWide: {},\n      _storageItems: {},\n      _configItems: {},\n    };\n  }\n\n  protected render(): TemplateResult | void {\n    if (\n      !this.hass ||\n      this._storageItems === undefined ||\n      this._configItems === undefined\n    ) {\n      return html`\n        <hass-loading-screen></hass-loading-screen>\n      `;\n    }\n    return html`\n      <hass-subpage header=\"Persons\">\n        <ha-config-section .isWide=${this.isWide}>\n          <span slot=\"header\">Persons</span>\n          <span slot=\"introduction\">\n            Here you can define each person of interest in Home Assistant.\n            ${this._configItems.length > 0\n              ? html`\n                  <p>\n                    Note: persons configured via configuration.yaml cannot be\n                    edited via the UI.\n                  </p>\n                `\n              : \"\"}\n          </span>\n          <ha-card class=\"storage\">\n            ${this._storageItems.map((entry) => {\n              return html`\n                <paper-item @click=${this._openEditEntry} .entry=${entry}>\n                  <paper-item-body>\n                    ${entry.name}\n                  </paper-item-body>\n                </paper-item>\n              `;\n            })}\n            ${this._storageItems.length === 0\n              ? html`\n                  <div class=\"empty\">\n                    Looks like you have not created any persons yet.\n                    <mwc-button @click=${this._createPerson}>\n                      CREATE PERSON</mwc-button\n                    >\n                  </div>\n                `\n              : html``}\n          </ha-card>\n          ${this._configItems.length > 0\n            ? html`\n                <ha-card header=\"Configuration.yaml persons\">\n                  ${this._configItems.map((entry) => {\n                    return html`\n                      <paper-item>\n                        <paper-item-body>\n                          ${entry.name}\n                        </paper-item-body>\n                      </paper-item>\n                    `;\n                  })}\n                </ha-card>\n              `\n            : \"\"}\n        </ha-config-section>\n      </hass-subpage>\n\n      <paper-fab\n        ?is-wide=${this.isWide}\n        icon=\"hass:plus\"\n        title=\"Add Person\"\n        @click=${this._createPerson}\n      ></paper-fab>\n    `;\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    this._fetchData();\n    loadPersonDetailDialog();\n  }\n\n  private async _fetchData() {\n    this._usersLoad = fetchUsers(this.hass!);\n    const personData = await fetchPersons(this.hass!);\n\n    this._storageItems = personData.storage.sort((ent1, ent2) =>\n      compare(ent1.name, ent2.name)\n    );\n    this._configItems = personData.config.sort((ent1, ent2) =>\n      compare(ent1.name, ent2.name)\n    );\n  }\n\n  private _createPerson() {\n    this._openDialog();\n  }\n\n  private _openEditEntry(ev: MouseEvent) {\n    const entry: Person = (ev.currentTarget! as any).entry;\n    this._openDialog(entry);\n  }\n\n  private _allowedUsers(users: User[], currentPerson?: Person) {\n    const used = new Set();\n    for (const coll of [this._configItems, this._storageItems]) {\n      for (const pers of coll!) {\n        if (pers.user_id) {\n          used.add(pers.user_id);\n        }\n      }\n    }\n    const currentUserId = currentPerson ? currentPerson.user_id : undefined;\n    return users.filter(\n      (user) => user.id === currentUserId || !used.has(user.id)\n    );\n  }\n\n  private async _openDialog(entry?: Person) {\n    const users = await this._usersLoad!;\n\n    showPersonDetailDialog(this, {\n      entry,\n      users: this._allowedUsers(users, entry),\n      createEntry: async (values) => {\n        const created = await createPerson(this.hass!, values);\n        this._storageItems = this._storageItems!.concat(created).sort(\n          (ent1, ent2) => compare(ent1.name, ent2.name)\n        );\n      },\n      updateEntry: async (values) => {\n        const updated = await updatePerson(this.hass!, entry!.id, values);\n        this._storageItems = this._storageItems!.map((ent) =>\n          ent === entry ? updated : ent\n        );\n      },\n      removeEntry: async () => {\n        if (\n          !confirm(`Are you sure you want to delete this person?\n\nAll devices belonging to this person will become unassigned.`)\n        ) {\n          return false;\n        }\n\n        try {\n          await deletePerson(this.hass!, entry!.id);\n          this._storageItems = this._storageItems!.filter(\n            (ent) => ent !== entry\n          );\n          return true;\n        } catch (err) {\n          return false;\n        }\n      },\n    });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      a {\n        color: var(--primary-color);\n      }\n      ha-card {\n        max-width: 600px;\n        margin: 16px auto;\n        overflow: hidden;\n      }\n      .empty {\n        text-align: center;\n        padding: 8px;\n      }\n      paper-item {\n        padding-top: 4px;\n        padding-bottom: 4px;\n      }\n      ha-card.storage paper-item {\n        cursor: pointer;\n      }\n      paper-fab {\n        position: fixed;\n        bottom: 16px;\n        right: 16px;\n        z-index: 1;\n      }\n\n      paper-fab[is-wide] {\n        bottom: 24px;\n        right: 24px;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"ha-config-person\", HaConfigPerson);\n"],"sourceRoot":""}